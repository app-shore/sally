@startuml C4_Component_Frontend
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml

LAYOUT_WITH_LEGEND()

title Component diagram for REST-OS Frontend Dashboard

Person(user, "Dispatcher/Operations", "System user")

Container_Boundary(web, "Operations Dashboard") {
    Component(app_router, "App Router", "Next.js 15", "Handles client/server routing and rendering")

    Component(dashboard_page, "Dashboard Page", "React Component", "Main dashboard with side-by-side layout")

    Component(control_panel, "Control Panel", "React Component", "Left panel (30%) with input forms and action buttons")
    Component(viz_area, "Visualization Area", "React Component", "Right panel (70%) with results and charts")

    Component(driver_form, "Driver Input Form", "React Hook Form", "Captures driver ID, hours driven, duty status")
    Component(dock_form, "Dock Input Form", "React Hook Form", "Captures dock duration and location")
    Component(route_form, "Route Input Form", "React Hook Form", "Captures distance, destination, appointments")
    Component(hos_form, "HOS Parameters Form", "React Hook Form", "Configures HOS rule parameters")

    Component(rec_card, "Recommendation Card", "React Component", "Color-coded rest recommendation display")
    Component(compliance_check, "Compliance Checklist", "React Component", "Visual HOS rule validation status")
    Component(metrics_viz, "Metrics Visualization", "Tremor/Recharts", "Bar charts and timeline views")
    Component(history_table, "History Table", "React Component", "Past engine execution results")

    Component(engine_store, "Engine Store", "Zustand", "Client state management for engine status and results")
    Component(api_hooks, "API Hooks", "React Query", "Server state management and API calls")
    Component(api_client, "API Client", "TypeScript", "Type-safe FastAPI client with auto-generated schemas")

    Component(validation, "Form Validation", "Zod", "Client-side input validation schemas")
}

Container(api, "Backend API", "FastAPI", "REST API for engine operations")

Rel(user, app_router, "Accesses dashboard", "HTTPS")

Rel(app_router, dashboard_page, "Renders")

Rel(dashboard_page, control_panel, "Contains")
Rel(dashboard_page, viz_area, "Contains")

Rel(control_panel, driver_form, "Contains")
Rel(control_panel, dock_form, "Contains")
Rel(control_panel, route_form, "Contains")
Rel(control_panel, hos_form, "Contains")

Rel(viz_area, rec_card, "Contains")
Rel(viz_area, compliance_check, "Contains")
Rel(viz_area, metrics_viz, "Contains")
Rel(viz_area, history_table, "Contains")

Rel(driver_form, validation, "Validates input")
Rel(dock_form, validation, "Validates input")
Rel(route_form, validation, "Validates input")
Rel(hos_form, validation, "Validates input")

Rel(control_panel, api_hooks, "Triggers engine run")
Rel(api_hooks, api_client, "Makes HTTP requests")
Rel(api_client, api, "Calls endpoints", "HTTPS/JSON")

Rel(api_hooks, engine_store, "Updates state")
Rel(rec_card, engine_store, "Reads latest result")
Rel(compliance_check, engine_store, "Reads compliance status")
Rel(metrics_viz, engine_store, "Reads metrics data")
Rel(history_table, engine_store, "Reads execution history")

@enduml
